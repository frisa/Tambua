:toc:

# Tambua
"Tambua", which is Swahili for "classify" or "identify"?

# Tensorflow Lite Build

The library can be build and installed in two different ways:
* As conan package
* As CMake project with dependencies

## Build/Install with Conan
Get the conan package management
----
brew install conan
----
The requirement:
----
self.requires("tensorflow-lite/2.12.0")
----
Detect the profile
----
conan profile detect
----
Build the project
----
conan build . --build=missing
----
Build the project debug
----
conan build . -s build_type=Debug --build=missing
----

## Build/Install just with CMake

The library can be downloaded and build from following link:
----
git clone https://github.com/tensorflow/tensorflow.git tflite_src
----
Following patch needs to be applied:
----
cd tensorflow_src
git apply ../Tambua/install.patch
----
Configure tensorflow lite project (will be installed to the /Users/jan/TFLite):
----
cmake ../tensorflow_src/tensorflow/lite/ \
-DTFLITE_ENABLE_INSTALL=ON \
-DCMAKE_FIND_PACKAGE_PREFER_CONFIG=ON \
-DCMAKE_INSTALL_PREFIX=/Users/jan/TFLite 
----
Output
----
CMake Error: install(EXPORT "tensorflow-liteTargets" ...) includes target "tensorflow-lite" which requires target "absl_flags" that is not in any export set.
CMake Error: install(EXPORT "tensorflow-liteTargets" ...) includes target "tensorflow-lite" which requires target "absl_hash" that is not in any export set.
CMake Error: install(EXPORT "tensorflow-liteTargets" ...) includes target "tensorflow-lite" which requires target "absl_status" that is not in any export set.
CMake Error: install(EXPORT "tensorflow-liteTargets" ...) includes target "tensorflow-lite" which requires target "absl_strings" that is not in any export set.
CMake Error: install(EXPORT "tensorflow-liteTargets" ...) includes target "tensorflow-lite" which requires target "absl_synchronization" that is not in any export set.
CMake Error: install(EXPORT "tensorflow-liteTargets" ...) includes target "tensorflow-lite" which requires target "absl_variant" that is not in any export set.
CMake Error: install(EXPORT "tensorflow-liteTargets" ...) includes target "tensorflow-lite" which requires target "ruy" that is not in any export set.
CMake Error: install(EXPORT "tensorflow-liteTargets" ...) includes target "tensorflow-lite" which requires target "pthreadpool" that is not in any export set.
CMake Error: install(EXPORT "tensorflow-liteTargets" ...) includes target "tensorflow-lite" which requires target "XNNPACK" that is not in any export set.
----

Build the project
----
make -j $(nproc) //Linux
make -j $(sysctl -n hw.physicalcpu)
----
Install the project
----
sudo make install
----

# Resources

* Workinstruction to build TFL link:https://github.com/bastien-sagetat/photohead/blob/main/doc/soft_requirements.md[Repository from Bastien Segatat]
* TFL Issue tractking: link:https://github.com/tensorflow/tensorflow/issues/62381[GitHub TensorFlow]

